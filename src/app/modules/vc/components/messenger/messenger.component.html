<div class="pinned-container d-flex align-items-center justify-content-between py-2 rounded" *ngIf="pinnedMessage">
  <i class="icon-pin text-warning mx-2"></i>
  <div class="message-info flex-grow-1">
    <small
      class="d-block font-medium">{{pinnedMessage.user.first_name + ' ' + pinnedMessage.user.last_name}}</small>
    <small class="d-block font-light">{{pinnedMessage.message.message}}</small>
  </div>
</div>
<div class="messenger" [class.has-pinned-message]="pinnedMessage" #chatContainer (scroll)="scrolled()">
  <ng-message-item #messageItem *ngFor="let message of messages;trackBy:trackByFn"
                   [position]="message.user.id == currentUser.id ? 'right' : 'left'"
                   [message]="message.message"
                   [sender]="message.user"
                   [replyMessage]="getReplyMessageOf(message)"
                   (delete)="deleteMessageClick(message)"
                   (pin)="pinMessageClick(message)"
                   (mute)="muteUserClick(message)"
                   (reply)="replyMessageClick(message)">
  </ng-message-item>
</div>
<div class="chat-footer">
  <div class="reply-container d-flex align-items-center justify-content-between py-2 m-2 rounded"
       *ngIf="replyMessage">
    <div class="message-info">
      <small
        class="d-block font-medium">{{replyMessage.user.first_name + ' ' + replyMessage.user.last_name}}</small>
      <small class="d-block font-light">{{replyMessage.message.message}}</small>
    </div>
    <i class="pi pi-times" (click)="cancelReply()"></i>
  </div>
  <div class="chat-inputarea">
    <ng-container *ngIf="enableChat">
      <ng-input-text [rtl]="fa" (keyup.enter)="sendMessageClick(null)" inputSize="md"
                     class="ml-2 flex-grow-1"
                     [placeholder]="'room.sendAMessage' | translate"
                     [(ngModel)]="messageText"></ng-input-text>
      <ng-button-async icon="pi pi-chevron-left"
                       (clickAsync)="sendMessageClick($event)"></ng-button-async>
    </ng-container>
    <span class="text-center flex-grow-1" *ngIf="!enableChat">{{'room.sendMessageBlocked' | translate}}</span>
  </div>
</div>
